{% extends 'base.html' %}
{% load static %}

{% block title %}Edu Hub ‚Äî Pair Your Future{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/pages/home.css' %}">
<link rel="stylesheet" href="{% static 'css/components/chat.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-badge">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø—Ä–æ—Ñ–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —Å –ò–ò</div>
    <h1>–ù–µ –∑–Ω–∞–µ—à—å –∫–µ–º —Å—Ç–∞—Ç—å?<br><span>–ú—ã –ø–æ–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –ø—Ä–∏–∑–≤–∞–Ω–∏–µ!</span></h1>
    <p>–ü—Ä–æ–π–¥–∏ —Ç–µ—Å—Ç —Å –Ω–∞—à–∏–º –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–æ–º, —É–∑–Ω–∞–π —Å–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ –ø–æ–ª—É—á–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</p>
    <div class="hero-buttons">
        <a href="/test/" class="btn btn-primary btn-large">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ</a>
        <button class="btn btn-secondary btn-large" onclick="document.getElementById('how').scrollIntoView({behavior: 'smooth'})">–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ</button>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="stat-item">
        <div class="stat-number">50+</div>
        <div class="stat-label">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤</div>
    </div>
    <div class="stat-item">
        <div class="stat-number">200+</div>
        <div class="stat-label">–ü—Ä–æ—Ñ–µ—Å—Å–∏–π</div>
    </div>
    <div class="stat-item">
        <div class="stat-number">10K+</div>
        <div class="stat-label">–ü—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç</div>
    </div>
    <div class="stat-item">
        <div class="stat-number">95%</div>
        <div class="stat-label">–î–æ–≤–æ–ª—å–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</div>
    </div>
</section>

<!-- How it Works Section -->
<section class="features-section" id="how">
    <h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">üí¨</div>
            <h3>1. –ü–æ–≥–æ–≤–æ—Ä–∏ —Å –ò–ò</h3>
            <p>–ù–∞—à —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –∑–∞–¥–∞—Å—Ç —Ç–µ–±–µ –≤–æ–ø—Ä–æ—Å—ã –æ —Ç–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö, —Ö–æ–±–±–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">üß†</div>
            <h3>2. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª—è</h3>
            <p>–ò–ò –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">üéØ</div>
            <h3>3. –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏</h3>
            <p>–ü–æ–ª—É—á–∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç –∏–º–µ–Ω–Ω–æ —Ç–µ–±–µ</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">üè´</div>
            <h3>4. –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã</h3>
            <p>–£–∑–Ω–∞–π, –≤ –∫–∞–∫–∏—Ö –≤—É–∑–∞—Ö –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—É—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</p>
        </div>
    </div>
</section>

<!-- Directions Section -->
<section class="features-section" id="directions">
    <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
    <div class="features-grid">
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">üíª</div>
            <h3>IT –∏ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
            <p>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞, Data Science, –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</p>
        </div>
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">üíº</div>
            <h3>–ë–∏–∑–Ω–µ—Å –∏ –≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
            <p>–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Ñ–∏–Ω–∞–Ω—Å—ã</p>
        </div>
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">‚öñÔ∏è</div>
            <h3>–ü—Ä–∞–≤–æ</h3>
            <p>–Æ—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è, –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ –ø—Ä–∞–≤–æ</p>
        </div>
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">üè•</div>
            <h3>–ú–µ–¥–∏—Ü–∏–Ω–∞</h3>
            <p>–í—Ä–∞—á–∏, —Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç—ã, –º–µ–¥—Å—ë—Å—Ç—Ä—ã</p>
        </div>
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">üé®</div>
            <h3>–î–∏–∑–∞–π–Ω –∏ –ò—Å–∫—É—Å—Å—Ç–≤–æ</h3>
            <p>–ì—Ä–∞—Ñ–∏–∫–∞, UI/UX, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</p>
        </div>
        <div class="feature-card" onclick="toggleAIChat()">
            <div class="feature-icon">üîß</div>
            <h3>–ò–Ω–∂–µ–Ω–µ—Ä–∏—è</h3>
            <p>–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, –º–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ</p>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-box">
        <h2>–ì–æ—Ç–æ–≤ —É–∑–Ω–∞—Ç—å —Å–≤–æ—ë –ø—Ä–∏–∑–≤–∞–Ω–∏–µ?</h2>
        <p>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç –∑–∞–π–º—ë—Ç –≤—Å–µ–≥–æ 10-15 –º–∏–Ω—É—Ç</p>
        <a href="/test/" class="btn btn-primary btn-large">–ù–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å</a>
    </div>
</section>

<!-- AI Chat Widget -->
<button id="aiAssistantBtn" onclick="toggleAIChat()" class="chat-toggle-btn">ü§ñ</button>

<div id="aiChatWindow" class="chat-window">
    <div class="chat-header">
        <div>
            <h3>Edu Hub AI</h3>
            <p>–¢–≤–æ–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</p>
        </div>
        <div class="chat-header-buttons">
            <button onclick="clearChatHistory()" title="–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ" class="chat-clear-btn">üîÑ</button>
            <button onclick="toggleAIChat()" class="chat-close-btn">√ó</button>
        </div>
    </div>
    
    <div id="aiChatMessages" class="chat-messages">
        <div class="welcome-message">
            <p>–ü—Ä–∏–≤–µ—Ç! üëã –Ø —Ç–≤–æ–π –∫–∞—Ä—å–µ—Ä–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Edu Hub AI. –ü–æ–º–æ–≥—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∏ –ø–æ–¥—Å–∫–∞–∂—É, –≥–¥–µ —É—á–∏—Ç—å—Å—è –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ!<br><br>–†–∞—Å—Å–∫–∞–∂–∏ –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ: —á–µ–º –ª—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è? –ö–∞–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ —à–∫–æ–ª–µ –Ω—Ä–∞–≤—è—Ç—Å—è?</p>
        </div>
    </div>
    
    <div class="chat-input-area">
        <div class="chat-input-wrapper">
            <input type="text" id="aiChatInput" placeholder="–ù–∞–ø–∏—à–∏ –æ —Å–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö..." class="chat-input">
            <button onclick="sendAIMessage()" class="chat-send-btn">‚û§</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    let conversationHistory = [];
    
    function toggleAIChat() {
        const chatWindow = document.getElementById('aiChatWindow');
        const btn = document.getElementById('aiAssistantBtn');
        
        if (chatWindow.style.display === 'none' || chatWindow.style.display === '') {
            chatWindow.style.display = 'flex';
            btn.style.transform = 'scale(0.9)';
        } else {
            chatWindow.style.display = 'none';
            btn.style.transform = 'scale(1)';
        }
    }
    
    function clearChatHistory() {
        conversationHistory = [];
        document.getElementById('aiChatMessages').innerHTML = `
            <div class="welcome-message">
                <p>–ù–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ! –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ: —á—Ç–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ? –ö–∞–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –Ω—Ä–∞–≤—è—Ç—Å—è? –ß–µ–º –ª—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è?</p>
            </div>
        `;
    }

    function sendAIMessage() {
        const input = document.getElementById('aiChatInput');
        const messagesDiv = document.getElementById('aiChatMessages');
        const message = input.value.trim();
        
        if (message) {
            const userMsg = document.createElement('div');
            userMsg.className = 'user-message';
            userMsg.innerHTML = `<div class="user-message-bubble"><p>${message}</p></div>`;
            messagesDiv.appendChild(userMsg);
            
            conversationHistory.push({ role: 'user', content: message });
            input.value = '';
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            
            const loadingMsg = document.createElement('div');
            loadingMsg.id = 'loadingIndicator';
            loadingMsg.innerHTML = `<div class="bot-message"><p>ü§î –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...</p></div>`;
            messagesDiv.appendChild(loadingMsg);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            
            fetch('/ai-chat/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message: message, history: conversationHistory.slice(-20) })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loadingIndicator')?.remove();
                conversationHistory.push({ role: 'assistant', content: data.response });
                
                const aiMsg = document.createElement('div');
                aiMsg.innerHTML = `<div class="bot-message"><p>${data.response}</p></div>`;
                messagesDiv.appendChild(aiMsg);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            })
            .catch(error => {
                document.getElementById('loadingIndicator')?.remove();
                const aiMsg = document.createElement('div');
                aiMsg.innerHTML = `<div class="bot-message"><p>üòî –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!</p></div>`;
                messagesDiv.appendChild(aiMsg);
            });
        }
    }

    document.getElementById('aiChatInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') sendAIMessage();
    });
</script>
{% endblock %}
